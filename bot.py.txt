import telebot
import requests
import time

BOT_TOKEN = "8133082828:AAGPCNPRG2feEb-vV36Wq-5W0Up7WN0QZ7Y"
CHANNEL = "@SmartTipsEasyOffer"
PERCENTUALE = 20

bot = telebot.TeleBot(BOT_TOKEN)

# Comando start
@bot.message_handler(commands=['start'])
def start(message):
    bot.reply_to(message,
        "üî• Benvenuto nel bot SmartTips Easy Offer!\n"
        f"Ricevi offerte dal canale: {CHANNEL}\n"
        f"Percentuale ricavo: {PERCENTUALE}%"
    )

# Comando per inviare un‚Äôofferta (per te)
@bot.message_handler(commands=['send'])
def send_offer(message):
    if message.chat.id != message.from_user.id:
        return

    text = message.text.replace("/send ", "")

    if text.strip() == "":
        bot.reply_to(message, "‚ùó Usa il comando cos√¨:\n/send Testo dell'offerta")
        return

    bot.send_message(CHANNEL, f"üî• NUOVA OFFERTA ({PERCENTUALE}%) üî•\n\n{text}")
    bot.reply_to(message, "‚úÖ Offerta inviata nel canale!")

# Loop infinito del bot
def run():
    print("Bot avviato...")
    while True:
        try:
            bot.polling(none_stop=True)
        except Exception as e:
            print("Errore polling:", e)
            time.sleep(3)

if __name__ == "__main__":
    run()
